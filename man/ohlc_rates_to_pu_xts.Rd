% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/di_futures.R
\name{ohlc_rates_to_pu_xts}
\alias{ohlc_rates_to_pu_xts}
\title{Convert DI OHLC rates to PU columns (xts)}
\usage{
ohlc_rates_to_pu_xts(
  x,
  maturity_date = NULL,
  cal = NULL,
  include_basis_day = TRUE,
  snap_to_tick = FALSE,
  rule_change_date = as.Date("2025-08-25"),
  round_pu = TRUE
)
}
\arguments{
\item{x}{xts object with daily OHLC rates (percent per year).}

\item{maturity_date}{Maturity `Date` or business days to expiry. If `NULL`, the
function looks for a `"maturity"` attribute on `x` (either a `Date` or
character parsable via `as.Date`).}

\item{cal}{`bizdays` calendar. Defaults to `"Brazil/ANBIMA"` when `NULL`.}

\item{include_basis_day}{Whether to add the basis day to the business-day count.}

\item{snap_to_tick}{Snap `rates` to the DI tick grid before pricing.}

\item{rule_change_date}{Date where the DI tick regime changes.}

\item{round_pu}{Round the output PUs to two decimals.}
}
\value{
An xts object containing the PU columns.
}
\description{
Adds PU columns (`PU_o`, `PU_h`, `PU_l`, `PU_c`) to a daily xts of DI rates. The
conversion follows the B3 convention `PU = 100000 / (1 + r/100)^(n/252)` with an
explicit business-day count and optional snap to the DI tick grid.
}
