% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/di_futures.R
\name{di_ohlc_to_pu_augmented_xts}
\alias{di_ohlc_to_pu_augmented_xts}
\title{Augment DI OHLC data with PU and diagnostics}
\usage{
di_ohlc_to_pu_augmented_xts(
  x,
  maturity_date = NULL,
  cal = NULL,
  include_basis_day = TRUE,
  snap_to_tick = FALSE,
  rule_change_date = as.Date("2025-08-25"),
  round_pu = FALSE,
  snap_rates_back = FALSE,
  include_diagnostics = FALSE
)
}
\arguments{
\item{x}{xts with DI OHLC rates (percent per year). A volume column (if present)
is preserved.}

\item{maturity_date}{Maturity `Date` or business days to expiry. If `NULL`, the
function looks for a `"maturity"` attribute on `x` (either a `Date` or
character parsable via `as.Date`).}

\item{cal}{`bizdays` calendar. Defaults to `"Brazil/ANBIMA"` when `NULL`.}

\item{include_basis_day}{Whether to add the basis day to the business-day count.}

\item{snap_to_tick}{Snap `rates` to the DI tick grid before pricing.}

\item{rule_change_date}{Date where the DI tick regime changes.}

\item{round_pu}{Round the output PUs to two decimals.}

\item{snap_rates_back}{Snap the round-tripped rates back to the DI tick grid.
When set to `TRUE`, diagnostics columns are returned.}

\item{include_diagnostics}{When `TRUE`, adds the round-tripped rates/PUs and the
differences versus the original inputs. This is implicitly enabled when
`snap_rates_back = TRUE`.}
}
\value{
An xts object with the original OHLC columns, PU columns, and optional diagnostics.
}
\description{
Enhances a DI futures OHLC xts with PU columns computed via the B3 convention.
Optionally, the function can round-trip the PUs back to rates and report
diagnostics on the differences.
}
